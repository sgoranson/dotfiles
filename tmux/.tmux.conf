
# # Color2 {{{

# Mode
set-option -g mode-bg colour0
set-option -g mode-fg default

# # Status position
set-option -g status-position top

# # Status update interval
set-option -g status-interval 5

# # Basic status bar colors
set-option -g status-bg default
set-option -g status-fg white

# # Left side of status bar
set-option -g status-left-length 40
# set -g status-left "#[fg=#00afff]üê± #S #{prefix_highlight} "
set-option -g status-left "#[fg=colour248,bg=colour0]üê± #S #{prefix_highlight} #[fg=default,bg=default] "

 # # Window status
 # set-option -g window-status-format "#[fg=white,bg=colour0] #I #[fg=white,bg=#363636] #W "
 # set-option -g window-status-current-format "#[fg=brightwhite,bg=#005F87] #I #[fg=brightwhite,bg=#005F87] #W "
 # set-option -g window-status-separator " "
 # set-option -g status-justify left
# # Window status
# # Window status
set-option -g window-status-format "#[fg=white,bg=colour0] #I #[fg=white,bg=#363636] #{b:pane_current_path} "
set-option -g window-status-current-format "#[fg=colour234,bg=colour4] #I #[fg=colour234,bg=colour24] #{b:pane_current_path}:#{?#{==:#{pane_current_command},zsh},,#{pane_current_command}} "
# set-option -g automatic-rename-format '#{b:pane_current_path}:#{?#{==:#{pane_current_command},zsh},,#{pane_current_command}}'
set-option -g window-status-separator " "
set-option -g status-justify left

# # Right side of status bar
# set-option -g status-right-length 40
set -g status-right-length 150
# set-option -g status-right " #[fg=colour248,bg=colour0] %a, %d %b %H:%M #[fg=colour0,bg=colour24] #(whoami)@#h "
set -g status-right "#[fg=colour248,bg=colour0] #($HOME/bin/status/ifstat_sys.sh) |  #{sysstat_cpu} | #{sysstat_mem} | #{sysstat_swap} | #{sysstat_loadavg}  #[fg=colour0,bg=#(~/bin/status/hostColor.sh)] #H "

# # Pane border
set-option -g pane-border-bg default
set-option -g pane-border-fg colour0
set-option -g pane-active-border-bg default
set-option -g pane-active-border-fg white

# # Pane number indicator
set-option -g display-panes-colour colour0
set-option -g display-panes-active-colour colour248

# # Clock mode
set-option -g clock-mode-colour white
set-option -g clock-mode-style 24

# # Message
set-option -g message-bg default
set-option -g message-fg default
# # }}}

# Terminal {{{
set-window-option -g xterm-keys on
set -g default-terminal screen-256color
set -s escape-time 50
set -g mouse on
set set-clipboard on
## update the TERM variable of terminal emulator when creating a new session or attaching a existing session
set -g update-environment 'DISPLAY SSH_ASKPASS SSH_AGENT_PID SSH_CONNECTION WINDOWID XAUTHORITY TERM'

set -ga terminal-overrides ",*256col*:Tc"
set -ga terminal-overrides ',*:Ss=\E[%p1%d q:Se=\E[2 q'

#if-shell "[[ ${TERM} =~ 256color || ${TERM} == fbterm ]]" 'set -g default-terminal tmux-256color'
#set -ga terminal-overrides ',*256color*:smcup@:rmcup@,*:Ss=\E[%p1%d q:Se=\E[2 q'

set -g default-shell "/usr/bin/zsh"
# tabs!
# set -g status-position top
set -g base-index 1
set -g pane-base-index 1
set -g renumber-windows on
# increase scrollback lines
set -g history-limit 10000
# }}}


# Keybinds {{{
# unbind everything
#unbind -a

set -g mode-keys vi
set -g prefix C-s
# set -g prefix2 C-s

# bind Escape copy-mode -e
bind-key -T prefix C-s send-prefix

set -g word-separators " @"



bind-key    -T copy-mode-vi Escape            send-keys -X cancel
# exit copy-mode
#bind p      paste-buffer


bind | split-window -v -c "#{pane_current_path}" # split pane and preserve path
bind - split-window -h -c "#{pane_current_path}" # split pane and preserve path

bind-key -T root M-h previous-window
bind-key -T root M-l next-window
bind-key -T prefix M-h previous-window
bind-key -T prefix M-l next-window
bind-key -T root M-j select-pane -L
bind-key -T root M-k select-pane -R
bind-key -T prefix M-j select-pane -L
bind-key -T prefix M-k select-pane -R

bind-key -T prefix q kill-window
bind-key -T prefix n new-window  -c "#{pane_current_path}"     
bind-key -T prefix c new-window  -c "#{pane_current_path}"     
bind-key -T prefix < swap-window -t -1
bind-key -T prefix > swap-window -t +1

bind -T copy-mode-vi v  send-keys -X  begin-selection
bind -T copy-mode-vi y  send-keys -X  copy-selection


bind r source-file ~/.tmux.conf \; display "Reloaded!"
# }}}

# Mouse {{{
# automagically enters copy-mode on mousewheel scroll!
bind-key -T copy-mode-vi MouseDragEnd1Pane                send-keys -X copy-pipe "xclip -r -selection clipboard -i"
bind     -T copy-mode-vi MouseDown1Pane    select-pane \; send-keys -X clear-selection
bind-key -T copy-mode-vi y                                send-keys -X copy-pipe-and-cancel "xclip -r -selection clipboard -i"
bind-key -T copy-mode-vi Y                                send-keys -X copy-pipe "xclip -r -selection clipboard -i"


bind -n C-WheelUpPane select-pane -t= \; copy-mode -e \; send-keys -M
bind -T copy-mode-vi    C-WheelUpPane   send-keys -X halfpage-up
bind -T copy-mode-vi    C-WheelDownPane send-keys -X halfpage-down

bind-key -T root MouseDown2Pane run-shell -b "xclip -selection clipboard -o | tmux load-buffer - && tmux paste-buffer"
bind-key p run-shell -b "xclip -selection clipboard -o | tmux load-buffer - && tmux paste-buffer"

bind-key -T copy-mode-vi WheelUpPane       select-pane\; send-keys -X -N 2 scroll-up
bind-key -T copy-mode-vi WheelDownPane     select-pane\; send-keys -X -N 2 scroll-down

unbind-key MouseDown3Pane
# }}}

# plugins {{{
if "test ! -d ~/.tmux/plugins/tpm" \
   "run 'git clone https://github.com/tmux-plugins/tpm ~/.tmux/plugins/tpm && ~/.tmux/plugins/tpm/bin/install_plugins'"

# set -g @plugin 'samoshkin/tmux-plugin-sysstat'
# set -g @plugin 'tmux-plugins/tmux-copycat'
# set -g @plugin 'soyuka/tmux-current-pane-hostname'
# set -g @plugin 'tmux-plugins/tmux-prefix-highlight'
# set -g @plugin 'tmux-plugins/tpm'

set -g @tpm_plugins '          \
tmux-plugins/tpm             \
samoshkin/tmux-plugin-sysstat            \
tmux-plugins/tmux-copycat \
soyuka/tmux-current-pane-hostname \
tmux-plugins/tmux-prefix-highlight \
'


set -g @sysstat_cpu_color_low     "#00afff"
set -g @sysstat_mem_color_low     "#00afff"
set -g @sysstat_swap_color_low    "#00afff"

set -g @sysstat_cpu_color_medium  "#8700ff"
set -g @sysstat_mem_color_medium  "#8700ff"
set -g @sysstat_swap_color_medium "#8700ff"

set -g @sysstat_cpu_color_stress  "#d700ff"
set -g @sysstat_mem_color_stress  "#d700ff"
set -g @sysstat_swap_color_stress "#d700ff"
# set -g @plugin 'erikw/tmux-powerline'

 run -b '~/.tmux/plugins/tpm/tpm'
# }}}
# vim:ff=unix:
