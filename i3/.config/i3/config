
# GLOBAL/COLOR {{{

set $modx Mod1
# set $modx Control+Shift
set $mody Mod4



# Xresources      var      value       fallback
# set_from_resource $bg      background  #cec3ba
# set_from_resource $fg      foreground  #292929
# set_from_resource $black   color0      #1f1c19
# set_from_resource $red     color1      #895757
# set_from_resource $green   color2      #648066
# set_from_resource $yellow  color3      #8e744e
# set_from_resource $blue    color4      #28516B
# set_from_resource $purple  color5      #695a6f
# set_from_resource $cyan    color6      #4a6c72
# set_from_resource $grey    color7      #617274


# # clas                  bd         bg      txt      ind     child_bd
# client.focused_inactive $grey     $bg      $black   $bg      $grey
# client.urgent           $red      $bg      $red     $red     $red
# client.placeholder      $red      $bg      $bg      $bg      $red
# client.background       $bg

# client.focused          #83a598 #222222 #888888 #292d2e   #285577
# client.unfocused        #222222 #222222 #888888 #292d2e   #222222

### COLOR ###
# class                 border  backgr. text    indicator child_border
client.focused          #4c7899 #285577 #ffffff #2e9ef4   #285577
client.focused_inactive #333333 #5f676a #ffffff #484e50   #5f676a
client.unfocused        #333333 #222222 #888888 #292d2e   #222222
client.urgent           #2f343a #900000 #ffffff #900000   #900000
client.placeholder      #000000 #0c0c0c #ffffff #000000   #0c0c0c
client.background       #ffffff



for_window [class=".*"] title_format " >_ %title "

#                         border  bg      text    indicat child_border
# client.focused            #232323 #232f3b #F7F7F7 #4F4F4F #212a33
# client.focused_inactive   #1A1A1A #232f3b #536d73 #121212 #212a33
# client.unfocused          #030706 #232f3b #636d73 #4F4F4F #212a33
# client.urgent             #1A1A1A #232f3b #a5a5a5 #1A1A1A #212a33
# client.background         #1b2026

# font pango: Terminus 12px
# font pango: xos4 Terminus 16px
font pango:Ubuntu 12

focus_follows_mouse always
# focus_wrapping false

#smart_borders on
#smart_gaps on
# new_window none
default_border normal 1

# bindsym Control+a exec xte 'key Home'
# bindsym Control+e exec xte 'key End'

# for_window [class="^.*"] border pixel 0
bindsym $mody+b [class="^.*"] border toggle 1
bindsym $mody+Shift+b [class="^.*"] border normal 0

# }}}

# KEYS - WINDOW FOCUS {{{

# start a terminal
bindsym $modx+Return  exec --no-startup-id kitty
bindsym Mod4+F5 exec tdrop --wm i3 -a -h 45% -w 80% kitty
bindsym $modx+Shift+Return exec tdrop --wm i3 -a -m -h 45%  kitty
# bindsym $modx+Shift+Return exec tdrop --wm i3 -a -m  termite; focus mode_toggle
# bindsym $modx+Shift+Return exec i3-quickterm shell
# bindsym F1 exec i3-quickterm shell

# bindsym $modx+r exec rofi -run-list-command ". ~/bin/getAliases" -run-command "/usr/bin/zsh -i -c '{cmd}'" -show run
# bindsym $modx+r exec zsh -c 'rofi -terminal xterm  -run-command "/usr/bin/zsh -i -c '{cmd}'" -show run'
# bindsym $modx+r exec rofi -run-terminal-command -show run


# change focus
bindsym $modx+j focus down
bindsym $modx+k focus up
bindsym $modx+h focus left
bindsym $modx+l focus right

bindsym $mody+a focus left
bindsym $mody+f focus right

bindsym $mody+Tab [con_mark=_last] focus

# reload the configuration file
bindsym $modx+F1 restart
bindsym $modx+F2 reload
# bindsym $modx+F3 exec "i3-nagbar -t warning -m 'You pressed the exit shortcut. Do you really want to exit i3? This will end your X session.' -b 'Yes, exit i3' 'i3-msg exit'"
bindsym $modx+F3 exec "i3-msg exit"

bindsym XF86AudioRaiseVolume exec pulseaudio-ctl up
bindsym XF86AudioLowerVolume exec pulseaudio-ctl down
bindsym XF86AudioMute exec pulseaudio-ctl mute

bindsym XF86MonBrightnessUp exec --no-startup-id xbacklight -inc 10
bindsym XF86MonBrightnessDown exec --no-startup-id xbacklight -dec 10

# use Mouse+$modx to drag floating windows to their wanted position. also resizing
floating_modifier $modx

 # }}}

# WORKSPACES {{{
set $ws1   "1: "
set $ws2   "2: "
set $ws3   "3: "
set $ws4   "4: "
set $ws5   "5: "
set $ws6   "6: "
set $ws7   "7: "
set $ws8   "8: "
set $ws9   "9: "
set $ws10  "10: "

workspace $ws1 output DP-1
workspace $ws2 output DP-1
workspace $ws3 output DP-1
workspace $ws4 output DP-2
workspace $ws5 output DP-2
workspace $ws7 output DP-2
workspace $ws8 output HDMI-0
workspace $ws9 output HDMI-0
workspace $ws10 output HDMI-0

# move the currently focused window to the scratchpad
bindsym $mody+Shift+z move scratchpad

# Show the next scratchpad window or hide the focused scratchpad window.
# If there are multiple scratchpad windows, this command cycles through them.
bindsym $mody+z scratchpad show

# bindsym $modx+Control+w workspace back_and_forth

bindsym $modx+Control+w move workspace to output right
# bindsym $modx+Shift+w move container to output right; focus output right

bindsym $modx+Control+r exec i3-input -F 'rename workspace to "%s"' -P 'New name: '

bindsym $modx+Control+h workspace prev
bindsym $modx+Control+l workspace next
bindsym $modx+o focus output prev
bindsym $modx+i focus output next

bindsym $modx+Control+o workspace prev_on_output
bindsym $modx+Control+i workspace next_on_output


# bindsym Mod0+i workspace prev_on_output
# bindsym $modx+o workspace next_on_output

bindsym $modx+1 workspace $ws1
bindsym $modx+2 workspace $ws2
bindsym $modx+3 workspace $ws3
bindsym $modx+4 workspace $ws4
bindsym $modx+5 workspace $ws5
bindsym $modx+6 workspace $ws6
bindsym $modx+7 workspace $ws7
bindsym $modx+8 workspace $ws8
bindsym $modx+9 workspace $ws9
bindsym $modx+0 workspace $ws10

# move focused container to workspace
bindsym $modx+Shift+1 move container to workspace $ws1
bindsym $modx+Shift+2 move container to workspace $ws2
bindsym $modx+Shift+3 move container to workspace $ws3
bindsym $modx+Shift+4 move container to workspace $ws4
bindsym $modx+Shift+5 move container to workspace $ws5
bindsym $modx+Shift+6 move container to workspace $ws6
bindsym $modx+Shift+7 move container to workspace $ws7
bindsym $modx+Shift+8 move container to workspace $ws8
bindsym $modx+Shift+9 move container to workspace $ws9
bindsym $modx+Shift+0 move container to workspace $ws10

# bindsym $modx+Shift+p move container to output right; focus output right
# bindsym $modx+Shift+u move container to output left; focus output left
bindsym $modx+Shift+o move container to workspace next
bindsym $modx+Shift+i move container to workspace prev

# move focused window
bindsym $modx+Shift+j  move down
bindsym $modx+Shift+k  move up
bindsym $modx+Shift+h  move left
bindsym $modx+Shift+l  move right

# }}}

# KEYS - SPLITS N FLOATS {{{
# focus the parent container
bindsym $modx+p focus parent

# focus the child container
# bindsym $modx+x focus child

# split in horizontal orientation
bindsym $modx+b split h

# split in vertical orientation
bindsym $modx+v split v

# bindsym $modx+o open

# toggle tiling / floating
bindsym $modx+Shift+f floating toggle
bindsym $modx+space focus mode_toggle

# enter fullscreen (maximize) mode for the focused container
bindsym $modx+m fullscreen toggle

# change container layout (stacked, tabbed, toggle split)
#bindsym $modx+s layout stacking
bindsym $modx+t layout tabbed
bindsym $modx+s layout toggle split
# change focus between tiling / floating windows
# bindsym $modx+space focus mode_toggle

# }}}

# GAPS {{{

gaps inner 6
gaps outer 0

bindsym $mody+Control+plus        gaps inner all plus  5
bindsym $mody+Control+minus       gaps inner all minus 5

# change gaps
# bindsym Mod+plus                gaps inner current plus  5
# bindsym Mod+minus               gaps inner current minus 5
# bindsym Mod+Shift+plus          gaps outer current plus  5
# bindsym Mod+Shift+minus         gaps outer current minus 5
bindsym $mody+plus  gaps outer all plus  5
bindsym $mody+minus gaps outer all minus 5
# }}}

# RESIZE {{{
# resize window (you can also use the mouse for that)
mode "resize" {
        # These bindings trigger as soon as you enter the resize mode

        # Pressing left will shrink the window’s width.
        # Pressing right will grow the window’s width.
        # Pressing up will shrink the window’s height.
        # Pressing down will grow the window’s height.
        bindsym h       resize shrink width 10 px or 10 ppt
        bindsym j       resize grow height 10 px or 10 ppt
        bindsym k         resize shrink height 10 px or 10 ppt
        bindsym l      resize grow width 10 px or 10 ppt

        # same bindings, but for the arrow keys
        bindsym Left        resize shrink width 10 px or 10 ppt
        bindsym Down        resize grow height 10 px or 10 ppt
        bindsym Up          resize shrink height 10 px or 10 ppt
        bindsym Right       resize grow width 10 px or 10 ppt

        # back to normal: Enter or Escape or $modx+r
        bindsym Return mode "default"
        bindsym Escape mode "default"
        bindsym $mody+r mode "default"
}

bindsym $mody+$modx+r mode "resize"
# }}}


# FOCUS {{{
show_marks yes
mode "marks" {
        # hardcoded focus keybindings
        bindsym w [class="(?i)google-chrome"] focus; mode "default"
        bindsym v [class="(?i)nvim-qt"] focus; mode "default"


        # keybindings for marking and jumping to clients
        bindsym m exec i3-input -F 'mark %s' -P 'Mark name: '
        bindsym g exec i3-input -F '[con_mark=%s] focus' -P 'Go to mark: '

        # Assign marks to keys 1-5
        bindsym Shift+1 mark mark1
        bindsym Shift+2 mark mark2; mode "default"
        bindsym Shift+3 mark mark3; mode "default"
        bindsym Shift+4 mark mark4; mode "default"
        bindsym Shift+5 mark mark5; mode "default"

        # Jump to clients marked 1-5
        bindsym 1 [con_mark="mark1"] focus
        bindsym 2 [con_mark="mark2"] focus; mode "default"
        bindsym 3 [con_mark="mark3"] focus; mode "default"
        bindsym 4 [con_mark="mark4"] focus; mode "default"
        bindsym 5 [con_mark="mark5"] focus; mode "default"

        # Exit to the default mode
        bindsym Return mode "default"
        bindsym Escape mode "default"
}
bindsym $mody+m mode "marks"
# }}}

# JUMPERS {{{
# shortcuts
mode "jumpers" {

        bindsym h exec --no-startup-id termite --class=FLOATMITE -e "zsh -c 'web-hist'"; mode "default"
        bindsym b exec --no-startup-id termite --class=FLOATMITE -e "zsh -c 'web-bookmarks.rb'"; mode "default"
        bindsym k exec --no-startup-id termite --class=FLOATMITE -e "zsh -c 'fzf-kill'"; mode "default"

        # Exit to the default mode
        bindsym Return mode "default"
        bindsym Escape mode "default"
}
bindsym $mody+j mode "jumpers"
# }}}


bindsym $modx+Tab exec --no-startup-id rofi  -show window
bindsym $mody+r exec --no-startup-id rofi  -show run
bindsym $mody+c exec --no-startup-id rofi  -modi "clipboard:greenclip print" -show clipboard -run-command '{cmd}'
bindsym $mody+q kill
bindsym $mody+w focus output right

# floating_minimum_size 371 x 548
# floating_maximum_size 2000 x 1500

# bindsym --release button2 kill
# The middle button and a modifer over any part of the window kills the window
bindsym --whole-window $mody+button2 kill

# The right button toggles floating
bindsym --whole-window Mod1+Shift+button3 floating toggle

# bindsym $mody+Tab exec "rofi -show window -kb-row-down 'Control+Tab' -kb-accept-entry '!Control_R,!Control+Tab'"
# INITRC {{{
# assign [class="(?i)(?:telegramdesktop)"] → $ws8
# assign [class="(?i)(?:google-chrome)"]  → $ws2
# assign [class="(?i)(?:spotify)"]  → $ws7

for_window [class="(?i)(?:gpick)"] floating enable
for_window [class="(?i)(?:doc-browser)"] floating enable
# for_window [class="mpv"] floating enable
# for_window [class="FLOATMITE"] floating enable
# for_window [class="FLOATMITE"] resize set 2000 1400
assign [class="FLOATMITE"] → output primary

bindsym $mody+F9 exec --no-startup-id termite --class=FLOATMITE -e "web-hist"
bindsym $mody+F10 exec --no-startup-id termite --class=FLOATMITE -e "zsh -c 'web-bookmarks.rb'"
bindsym $mody+F11 exec --no-startup-id termite --class=FLOATMITE -e "zsh -c 'fzf-kill'"
bindsym $mody+F12 exec --no-startup-id rofi-dofi.sh

# exec_always --no-startup-id ~/bin/polybarz
exec_always --no-startup-id ~/bin/fix_xcursor
exec_always --no-startup-id greenclip daemon

# exec --no-startup-id xfsettingsd
exec --no-startup-id telegram-desktop
# exec --no-startup-id spotify
exec --no-startup-id google-chrome-stable
exec --no-startup-id termite
exec --no-startup-id dunst

exec --no-startup-id nitrogen --restore
exec --no-startup-id compton -b
exec --no-startup-id dropbox
# exec --no-startup-id clipmenud
#exec --no-startup-id pnmixer
#exec --no-startup-id batterymon
# exec --no-startup-id alttabhax

# }}}

# start i3bar to display a workspace bar
# bar {
#     # font pango:Roboto 14
#     font pango:Font Awesome 5 Pro 7
#     output HDMI-1
#     output DP-1

#     status_command          i3blocks
#     bindsym button4         nop
#     bindsym button5         nop
#     position                bottom
#     tray_output             primary
#     separator_symbol        "·"
#     workspace_buttons       yes
#     # strip_workspace_numbers yes

#     colors {
#         background  #212121
#         statusline  #dddddd
#         separator   #666666
#         # class             border  backgr. text
#         focused_workspace   #2b83a6 #2b83a6 #ffffff
#         active_workspace    #212121 #212121 #ffffff
#         inactive_workspace  #212121 #212121 #86888c
#         urgent_workspace    #d64e4e #d64e4e #ffffff
#     }
# }

# bar {
#     font pango:UbuntuMono Nerd Font Mono 12
#     # font pango:Ubuntu Mono 12
#     output DP-2

#     status_command          i3blocks
#     bindsym button4         nop
#     bindsym button5         nop
#     position                bottom
#     tray_output             HDMI-1
#     # separator_symbol        "|"
#     workspace_buttons       yes
#     # strip_workspace_numbers yes

#     colors {
#         background  #212121
#         statusline  #dddddd
#         separator   #666666
#         # class             border  backgr. text
#         focused_workspace   #2b83a6 #2b83a6 #ffffff
#         active_workspace    #212121 #212121 #ffffff
#         inactive_workspace  #212121 #212121 #86888c
#         urgent_workspace    #d64e4e #d64e4e #ffffff
#     }
# }
